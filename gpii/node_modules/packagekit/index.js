/**
 * GPII PackageKit Device Reporter
 *
 * Copyright 2014 Emergya
 *
 * Licensed under the New BSD license. You may not use this file except in
 * compliance with this License.
 *
 * You may obtain a copy of the License at
 * https://github.com/GPII/linux/blob/master/LICENSE.txt
 *
 * The research leading to these results has received funding from the European Union's
 * Seventh Framework Programme (FP7/2007-2013)
 * under grant agreement no. 289016.
 */

var fluid = require("universal");

require("./packageKitDeviceReporter.js");

// Initialize the Device Reporter's installedPackagesCache at the very
// beginning and avoid a delay when a user is logging in into the system.
// Right now this is provisional, so we have to re-think how to initialize it
// in a smarter way. http://issues.gpii.net/browse/GPII-851
//
var gpii = fluid.registerNamespace("gpii");
fluid.registerNamespace("gpii.packageKit");

var packageKit = require("./nodepackagekit/build/Release/nodepackagekit.node");
gpii.packageKit.installedPackagesCache = packageKit.getPackages("installed;~devel");
