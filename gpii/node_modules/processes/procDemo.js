/*!
GPII Prcoess Bridge Demo.

Copyright 2014 Inclusive Design Research Centre, OCAD University

Licensed under the New BSD license. You may not use this file except in
compliance with this License.

You may obtain a copy of the License at
https://github.com/gpii/universal/LICENSE.txt
*/

/*global require */
"use strict";

var fluid = require("universal");
require ("./processes.js");

var processes = fluid.registerNamespace ("gpii.processes");

// Start up orca BEFORE running this demo.

// This result is an array, but interested only in the first one.
var orcaProcs = processes.findProcessesByCommand ("orca");
if (orcaProcs.length > 0) {
  var orcaProc = orcaProcs[0];

  var orcaMonitor = processes.initMonitor();

  // Periodically check if Orca has quit.
  orcaMonitor.intervalID = setInterval (function() {
    processes.monitorChanged (orcaProc, orcaMonitor);
  });
}
console.log ("processes = " + processes);
console.log ("Waiting...");
